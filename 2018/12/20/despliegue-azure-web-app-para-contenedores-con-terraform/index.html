<!doctype html><html lang=en><head><meta charset=utf-8><title>Despliegue Azure Web App para contenedores con Terraform - Manuss20</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.75.1"><meta itemprop=name content="Despliegue Azure Web App para contenedores con Terraform"><meta itemprop=description content="Una Web App es un servicio en el cual ponen a disposición una plataforma previamente configurada para alojar aplicaciones web, APIs tipo REST y Back Ends para aplicaciones móviles. Tales aplicaciones pueden estar desarrolladas en cualquier lenguaje conocido como puede ser .Net, Java, Ruby, NodeJS, Python, PHP, entre otros."><meta itemprop=datePublished content="2018-12-20T00:00:00+00:00"><meta itemprop=dateModified content="2018-12-20T00:00:00+00:00"><meta itemprop=wordCount content="401"><meta itemprop=image content="manuss20.github.io/img/posts/despliege_WebApps_Azure_Terraforms.jpg"><meta itemprop=keywords content="Azure,AKS,Azure Web App,Terraforms,Automation,Cloud,Containers,Docker,IaC,"><meta property="og:title" content="Despliegue Azure Web App para contenedores con Terraform"><meta property="og:description" content="Una Web App es un servicio en el cual ponen a disposición una plataforma previamente configurada para alojar aplicaciones web, APIs tipo REST y Back Ends para aplicaciones móviles. Tales aplicaciones pueden estar desarrolladas en cualquier lenguaje conocido como puede ser .Net, Java, Ruby, NodeJS, Python, PHP, entre otros."><meta property="og:type" content="article"><meta property="og:url" content="manuss20.github.io/2018/12/20/despliegue-azure-web-app-para-contenedores-con-terraform/"><meta property="og:image" content="manuss20.github.io/img/posts/despliege_WebApps_Azure_Terraforms.jpg"><meta property="article:published_time" content="2018-12-20T00:00:00+00:00"><meta property="article:modified_time" content="2018-12-20T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="manuss20.github.io/img/posts/despliege_WebApps_Azure_Terraforms.jpg"><meta name=twitter:title content="Despliegue Azure Web App para contenedores con Terraform"><meta name=twitter:description content="Una Web App es un servicio en el cual ponen a disposición una plataforma previamente configurada para alojar aplicaciones web, APIs tipo REST y Back Ends para aplicaciones móviles. Tales aplicaciones pueden estar desarrolladas en cualquier lenguaje conocido como puede ser .Net, Java, Ruby, NodeJS, Python, PHP, entre otros."><meta name=twitter:site content="@manuss20"><link rel=stylesheet href=/manuss20.github.io/css/bundle.min.759e3848ea529eef056dab665b241e2af569e601ab80f68f8d4a4d002a155dd4.css integrity="sha256-dZ44SOpSnu8FbatmWyQeKvVp5gGrgPaPjUpNACoVXdQ="><link rel=stylesheet href=/manuss20.github.io/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/manuss20.github.io/ class=nav>Blog</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/manuss20.github.io/ class="nav link"><i class="fa fa-home"></i>Home</a>
<a href=/manuss20.github.io/about/ class="nav link"><i class="fas fa-user-astronaut"></i>About</a>
<a href=/manuss20.github.io/categories/ class="nav link"><i class="fas fa-journal-whills"></i>Categories</a>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu></header><div id=wrapper><section id=site-intro><a href=/manuss20.github.io/><img src=manuss20.github.io/img/main/profile.jpg class=circle width=100 alt="Manuel Sanchez"></a><header><h1>Manuel Sánchez</h1></header><main><p>Technical Manager at @everis | Microsoft MVP Azure at <a href=#>@Microsoft</a>| Founder and Organizer @netcoreconf & @CAT_zure</p></main><footer><ul class=socnet-icons><li><a href=//github.com/manuss20 target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//medium.com/@manuss20 target=_blank rel=noopener title=Medium class="fab fa-medium"></a></li><li><a href=//linkedin.com/in/manuss20 target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/manuss20 target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/manuss20 target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=manuss20.github.io/2018/12/20/despliegue-azure-web-app-para-contenedores-con-terraform/>Despliegue Azure Web App para contenedores con Terraform</a></h2><p>Una Web App es un servicio en el cual ponen a disposición una plataforma previamente configurada para alojar aplicaciones web, APIs tipo REST y Back Ends para aplicaciones móviles. Tales aplicaciones pueden estar desarrolladas en cualquier lenguaje conocido como puede ser .Net, Java, Ruby, NodeJS, Python, PHP, entre otros.</p></div><div class=meta><time class=published datetime="2018-12-20 00:00:00 +0000 UTC">December 20, 2018</time>
<span class=author>Manuel Sanchez</span><p>2 minute read</p></div></header><section id=socnet-share><a href="//twitter.com/share?text=Despliegue%20Azure%20Web%20App%20para%20contenedores%20con%20Terraform&url=manuss20.github.io%2f2018%2f12%2f20%2fdespliegue-azure-web-app-para-contenedores-con-terraform%2f" target=_blank rel=noopener class="nav share-btn twitter"><i class="fab fa-twitter"></i><p>&nbsp;Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=manuss20.github.io%2f2018%2f12%2f20%2fdespliegue-azure-web-app-para-contenedores-con-terraform%2f" target=_blank rel=noopener class="nav share-btn facebook"><i class="fab fa-facebook"></i><p>&nbsp;Facebook</p></a><a href="//www.linkedin.com/shareArticle?url=manuss20.github.io%2f2018%2f12%2f20%2fdespliegue-azure-web-app-para-contenedores-con-terraform%2f&title=Despliegue%20Azure%20Web%20App%20para%20contenedores%20con%20Terraform" target=_blank rel=noopener class="nav share-btn linkedin"><i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p></a><a href="//www.reddit.com/submit?url=manuss20.github.io%2f2018%2f12%2f20%2fdespliegue-azure-web-app-para-contenedores-con-terraform%2f&title=Despliegue%20Azure%20Web%20App%20para%20contenedores%20con%20Terraform" target=_blank rel=noopener class="nav share-btn reddit"><i class="fab fa-reddit-alien"></i><p>&nbsp;Reddit</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by Manuel%20Sanchez&body=manuss20.github.io%2f2018%2f12%2f20%2fdespliegue-azure-web-app-para-contenedores-con-terraform%2f" target=_blank class="nav share-btn email" data-proofer-ignore><i class="fas fa-envelope"></i><p>&nbsp;Email</p></a></section><a href=manuss20.github.io/2018/12/20/despliegue-azure-web-app-para-contenedores-con-terraform/ class="image featured"><img src=manuss20.github.io/img/posts/despliege_WebApps_Azure_Terraforms.jpg alt></a><div class=content><p>Una Web App es un servicio en el cual ponen a disposición una plataforma previamente configurada para alojar aplicaciones web, APIs tipo REST y Back Ends para aplicaciones móviles. Tales aplicaciones pueden estar desarrolladas en cualquier lenguaje conocido como puede ser .Net, Java, Ruby, NodeJS, Python, PHP, entre otros.</p><p>Una de las ventajas de estos servicios es que permiten escalar el tamaño de recursos que la Web App necesita con facilidad y le evitan a los desarrolladores de software y empresas tener que instalar y administrar un entorno completo de sistema operativo, base de datos e intérpretes de lenguajes.</p><p>Actualmente la tendencia en los desarrollos web modernos está usando Docker containers para “dockerizar” sus aplicaciones. El uso en entornos donde se está creando una arquitectura de microservicios, es probable que esos despliegues los estén haciendo con herramientas de automatización como pueden ser AKS o Terraform.</p><p>En este ejemplo nos centraremos en la automatización con Terraform. Actualmente si deseamos usar Azure Web Apps como host de nuestro contenedor, la documentación de Terraform no nos da toda la información necesaria para poder hacerlo. Por ello a continuación os facilito un ejemplo de cómo poder configurarlo:</p><pre><code># Use the Azure Resource Manager Provider
provider &quot;azurerm&quot; {
  version = &quot;~&gt; 1.15&quot;
}

# Create a new Resource Group
resource &quot;demo_resource_group&quot; &quot;group&quot; {
  name     = &quot;webapp-containers-demo&quot;
  location = &quot;westeurope&quot;
}

# Create an App Service Plan with Linux
resource &quot;azurerm_app_service_plan&quot; &quot;appserviceplan&quot; {
  name                = &quot;${demo_resource_group.group.name}-plan&quot;
  location            = &quot;${demo_resource_group.group.location}&quot;
  resource_group_name = &quot;${demo_resource_group.group.name}&quot;

  # Define Linux as Host OS
  kind = &quot;Linux&quot;

  # Choose size
  sku {
    tier = &quot;Standard&quot;
    size = &quot;S1&quot;
  }

  properties {
    reserved = true # Mandatory for Linux plans
  }
}

# Create an Azure Web App for Containers in that App Service Plan
resource &quot;azurerm_app_service&quot; &quot;dockerapp&quot; {
  name                = &quot;${demo_resource_group.group.name}-dockerapp&quot;
  location            = &quot;${demo_resource_group.group.location}&quot;
  resource_group_name = &quot;${demo_resource_group.group.name}&quot;
  app_service_plan_id = &quot;${azurerm_app_service_plan.appserviceplan.id}&quot;

  # Do not attach Storage by default
  app_settings {
    WEBSITES_ENABLE_APP_SERVICE_STORAGE = false

    /*
    # Settings for private Container Registires  
    DOCKER_REGISTRY_SERVER_URL      = &quot;&quot;
    DOCKER_REGISTRY_SERVER_USERNAME = &quot;&quot;
    DOCKER_REGISTRY_SERVER_PASSWORD = &quot;&quot;
    */
  }

  # Configure Docker Image to load on start
  site_config {
    linux_fx_version = &quot;DOCKER|appsvcsample/static-site:latest&quot;
    always_on        = &quot;true&quot;
  }

  identity {
    type = &quot;SystemAssigned&quot;
  }
}
</code></pre><p>Para asegurarnos que se configura correctamente debe de prestar especial atención a que las siguientes propiedades estén correctamente definidas en su archivo de configuración, de lo contrario no funcionará correctamente el despliegue:</p><pre><code>reserved = true
WEBSITES_ENABLE_APP_SERVICE_STORAGE = false
</code></pre><p>Saludos!</p></div><footer><ul class=stats><li class=categories><ul><li><a class=article-terms-link href=/manuss20.github.io/categories/azure/>Azure</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/aks/>AKS</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/azure-web-app/>Azure Web App</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/terraforms/>Terraforms</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/automation/>Automation</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/cloud/>Cloud</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/containers/>Containers</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/docker/>Docker</a></li><li><a class=article-terms-link href=/manuss20.github.io/categories/iac/>IaC</a></li></ul></li><li class=tags><ul><li><a class=article-terms-link href=/manuss20.github.io/tags/azure/>Azure</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/aks/>AKS</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/azure-web-app/>Azure Web App</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/terraforms/>Terraforms</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/automation/>Automation</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/cloud/>Cloud</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/containers/>Containers</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/docker/>Docker</a></li><li><a class=article-terms-link href=/manuss20.github.io/tags/iac/>IaC</a></li></ul></li></ul></footer></article><article class=post><div><h2>Say something</h2><form id=post-js-form class=post-new-comment method=post><h5 class="post-reply-notice hidden"><span class=post-reply-arrow></span><span class=post-reply-name></span></h5><input type=hidden name=options[entryId] value=a38473ce7e2763078a89efe12c8d7dda>
<input type=hidden name=fields[replyThread]>
<input type=hidden name=fields[replyID]>
<input type=hidden name=fields[replyName]>
<input required name=fields[name] type=text placeholder="Your name (Required)">
<input name=fields[website] type=text placeholder="Your website">
<input required name=fields[email] type=email placeholder="Your email address (Required for Gravatar)">
<textarea required name=fields[body] placeholder="Your message. Feel free to use Markdown (Google 'Markdown Cheat Sheet')." rows=10></textarea><p class=post-submit-notice><strong class="post-submit-notice-text submit-success hidden">Thanks for your comment! It will be shown on the site once it has been approved.</strong>
<strong class="post-submit-notice-text submit-failed hidden">Sorry, there was an error with your submission. Please make sure all required fields have been completed and try again.</strong></p><input type=submit value=Submit class=button>
<input type=submit value=Submitted class="hidden button" disabled>
<input type=reset value=Reset class=button></form></div><div><h2>Comments</h2></div></article><div class=pagination><a href=manuss20.github.io/2018/11/18/azure-event-grid/ class=button><div class=previous><div>Azure Event Grid</div></div></a><a href=manuss20.github.io/2019/01/03/netcoreconf/ class=button><div class=next><div>Netcoreconf</div></div></a></div></main><section id=site-sidebar><img src=/img/MVP_Logo.png><section id=recent-posts><header><h1>Recent posts</h1></header><article class=mini-post><header><h2><a href=manuss20.github.io/2020/03/14/dapr/>DAPR</a></h2><time class=published datetime>March 14, 2020</time></header></article><article class=mini-post><header><h2><a href=manuss20.github.io/2020/02/11/azure-keyvault-docker/>Azure KeyVault + Docker</a></h2><time class=published datetime>February 11, 2020</time></header></article><article class=mini-post><header><h2><a href=manuss20.github.io/2020/01/20/eventos-netcoreconf-barcelona-2020/>[Eventos] Netcoreconf Barcelona 2020</a></h2><time class=published datetime>January 20, 2020</time></header></article><article class=mini-post><header><h2><a href=manuss20.github.io/2019/11/22/monitorizaci%C3%B3n-de-aplicaciones-en-azure/>Monitorización de aplicaciones en Azure</a></h2><time class=published datetime>November 22, 2019</time></header></article><article class=mini-post><header><h2><a href=manuss20.github.io/2019/09/26/eventos-netcoreconf-galicia-2019/>[Eventos] Netcoreconf Galicia 2019</a></h2><time class=published datetime>September 26, 2019</time></header></article></section><section id=categories><header><h1><a href=/manuss20.github.io/categories>Categories</a></h1></header><a href=/manuss20.github.io/tags/2019 style=font-size:1rem>2019</a>
<a href=/manuss20.github.io/tags/aks style=font-size:1rem>aks</a>
<a href=/manuss20.github.io/tags/architecture style=font-size:1rem>architecture</a>
<a href=/manuss20.github.io/tags/arm style=font-size:1.581642902557735rem>arm</a>
<a href=/manuss20.github.io/tags/automation style=font-size:1.948618715735074rem>automation</a>
<a href=/manuss20.github.io/tags/automatizaci%C3%B3n style=font-size:1rem>automatización</a>
<a href=/manuss20.github.io/tags/azure style=font-size:2.4679032527093563rem>azure</a>
<a href=/manuss20.github.io/tags/azure-application-insight style=font-size:1rem>azure-application-insight</a>
<a href=/manuss20.github.io/tags/azure-arm style=font-size:1.581642902557735rem>azure-arm</a>
<a href=/manuss20.github.io/tags/azure-devops style=font-size:1rem>azure-devops</a>
<a href=/manuss20.github.io/tags/azure-event-grid style=font-size:1rem>azure-event-grid</a>
<a href=/manuss20.github.io/tags/azure-functions style=font-size:1rem>azure-functions</a>
<a href=/manuss20.github.io/tags/azure-logic-apps style=font-size:1rem>azure-logic-apps</a>
<a href=/manuss20.github.io/tags/azure-monitor style=font-size:1rem>azure-monitor</a>
<a href=/manuss20.github.io/tags/azure-web-app style=font-size:1rem>azure-web-app</a>
<a href=/manuss20.github.io/tags/azure-webapps style=font-size:1rem>azure-webapps</a>
<a href=/manuss20.github.io/tags/beginners style=font-size:1rem>beginners</a>
<a href=/manuss20.github.io/tags/cd style=font-size:1.581642902557735rem>cd</a>
<a href=/manuss20.github.io/tags/ci style=font-size:1.581642902557735rem>ci</a>
<a href=/manuss20.github.io/tags/cloud style=font-size:2.2695277313808204rem>cloud</a>
<a href=/manuss20.github.io/tags/community style=font-size:2.100927439532017rem>community</a>
<a href=/manuss20.github.io/tags/comunidad style=font-size:2.0302313553994944rem>comunidad</a>
<a href=/manuss20.github.io/tags/containers style=font-size:1rem>containers</a>
<a href=/manuss20.github.io/tags/dapr style=font-size:1rem>dapr</a>
<a href=/manuss20.github.io/tags/deploy style=font-size:1.581642902557735rem>deploy</a>
<a href=/manuss20.github.io/tags/devops style=font-size:1rem>devops</a>
<a href=/manuss20.github.io/tags/docker style=font-size:1rem>docker</a>
<a href=/manuss20.github.io/tags/event style=font-size:2.0302313553994944rem>event</a>
<a href=/manuss20.github.io/tags/event-grid style=font-size:1rem>event-grid</a>
<a href=/manuss20.github.io/tags/eventos style=font-size:2.0302313553994944rem>eventos</a>
<a href=/manuss20.github.io/tags/events style=font-size:1rem>events</a>
<a href=/manuss20.github.io/tags/functions style=font-size:1rem>functions</a>
<a href=/manuss20.github.io/tags/global-azure-bootcamp style=font-size:1rem>global-azure-bootcamp</a>
<a href=/manuss20.github.io/tags/global-devops-bootcamp style=font-size:1rem>global-devops-bootcamp</a>
<a href=/manuss20.github.io/tags/global-integration-bootcamp style=font-size:1rem>global-integration-bootcamp</a>
<a href=/manuss20.github.io/tags/grid style=font-size:1rem>grid</a>
<a href=/manuss20.github.io/tags/group-resources style=font-size:1.581642902557735rem>group-resources</a>
<a href=/manuss20.github.io/tags/iaas style=font-size:1rem>iaas</a>
<a href=/manuss20.github.io/tags/iac style=font-size:1rem>iac</a>
<a href=/manuss20.github.io/tags/integration style=font-size:1rem>integration</a>
<a href=/manuss20.github.io/tags/lifecycle style=font-size:1rem>lifecycle</a>
<a href=/manuss20.github.io/tags/micosoft style=font-size:1rem>micosoft</a>
<a href=/manuss20.github.io/tags/microservices style=font-size:1rem>microservices</a>
<a href=/manuss20.github.io/tags/microservicios style=font-size:1rem>microservicios</a>
<a href=/manuss20.github.io/tags/monitoring style=font-size:1rem>monitoring</a>
<a href=/manuss20.github.io/tags/netcore style=font-size:1.7339516263546781rem>netcore</a>
<a href=/manuss20.github.io/tags/netcoreconf style=font-size:1.7339516263546781rem>netcoreconf</a>
<a href=/manuss20.github.io/tags/networking style=font-size:2.0302313553994944rem>networking</a>
<a href=/manuss20.github.io/tags/paas style=font-size:1rem>paas</a>
<a href=/manuss20.github.io/tags/processes style=font-size:1rem>processes</a>
<a href=/manuss20.github.io/tags/saas style=font-size:1.366975813177339rem>saas</a>
<a href=/manuss20.github.io/tags/serverless style=font-size:1rem>serverless</a>
<a href=/manuss20.github.io/tags/templates style=font-size:1.581642902557735rem>templates</a>
<a href=/manuss20.github.io/tags/terraforms style=font-size:1rem>terraforms</a>
<a href=/manuss20.github.io/tags/workshops style=font-size:2.0302313553994944rem>workshops</a></section></section><footer id=site-footer><ul class=socnet-icons></ul><p class=copyright>&copy; 2020
Manuss20
.<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.75.1 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a><script src=/manuss20.github.io/js/highlight.js></script><script>hljs.initHighlightingOnLoad();</script><script src=/manuss20.github.io/js/bundle.min.c15b96a8004565d6e6bf5d5dc34a25f8d1bd3a6a3579d31318f5eb03cd657daf.js integrity="sha256-wVuWqABFZdbmv11dw0ol+NG9Omo1edMTGPXrA81lfa8="></script><script src=/manuss20.github.io/js/add-on.js></script></div></body></html>